# Pieces taken from:
#
# - /usr/share/doc/msmtp/examples/msmtprc-system.example
# - https://wiki.archlinux.org/title/Msmtp#Basic_setup
# - https://arnaudr.io/2020/08/24/send-emails-from-your-terminal-with-msmtp/

defaults
auth           on
tls            on

# A system wide configuration file is optional.
# If it exists, it usually defines a default account.
# This allows msmtp to be used like /usr/sbin/sendmail.
account default
host           smtp.gmail.com
# Use TLS on port 465. On this port, TLS starts without STARTTLS.
# https://www.cloudflare.com/learning/email-security/smtp-port-25-587/
port           465
tls_starttls   off
# The `from` will get replaced when Gmail transmits the mail to the receiver.
# To avoid having a bot scrape this email and send me spam, I've only listed
# the Gmail username in `user`, opting to leave `from` as <user>@<host> (it
# cannot be omitted, or msmtp gets mad)
from           %U@%H
user           z1mm32m4n
passwordeval   cat /etc/z1mm32m4n_gmail_passwd

# Syslog logging with facility LOG_MAIL instead of the default LOG_USER
# Allows reading the logs with:
#
#     journalctl --facility mail
#
# in addition to:
#
#     journalctl --identifier msmtp
#     journalctl -t msmtp
#
syslog LOG_MAIL
